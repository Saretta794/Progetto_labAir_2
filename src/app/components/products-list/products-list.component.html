<app-header></app-header>

<div *ngIf="errorMessage" class="m-3 p-3 customBorder">

  <p>{{errorMessage}}</p>

</div> 
    
<h1 class="my-5">Prodotti</h1>
    <div class="row">

        <div class="col-md-2 mb-3">

            <div ngbAccordion>
                <div ngbAccordionItem>
                  <h2 ngbAccordionHeader>
                    <button ngbAccordionButton>Categoria</button>
                  </h2>
                  <div ngbAccordionCollapse>
                    <div ngbAccordionBody>
                        <ul class="list-group list-group-flush">
                            <li 
                            class="list-group-item" 
                            *ngFor="let c of categories" 
                            (click)="filterByCategory(c)">
                            {{ c }}</li>
                        </ul>
                    </div>
                  </div>
                </div>

                <div ngbAccordionItem>
                    <h2 ngbAccordionHeader>
                      <button ngbAccordionButton>Colore</button>
                    </h2>
                    <div ngbAccordionCollapse>
                      <div ngbAccordionBody>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item"
                             *ngFor="let c of colors"
                             (click)="filterByColor(c)"
                             >{{ c }}</li>
                          </ul>
                      </div>
                    </div>
                </div>

                <div ngbAccordionItem>
                    <h2 ngbAccordionHeader>
                      <button ngbAccordionButton>Prezzo</button>
                    </h2>
                    <div ngbAccordionCollapse>
                      <div ngbAccordionBody>
                        <ul class="list-group list-group-flush">

                            <li class="list-group-item" (click)="filterByPrice(lowPrice, midPrice)">
                                {{ lowPrice | currency:"EUR":"symbol":".0"}} - 
                                {{ midPrice | currency:"EUR":"symbol":".0"}}
                            </li>

                            <li class="list-group-item" (click)="filterByPrice(midPrice, highPrice)">
                                {{ midPrice | currency:"EUR":"symbol":".0"}} - 
                                {{ highPrice | currency:"EUR":"symbol":".0"}}
                            </li>

                            <li class="list-group-item" (click)="filterByPrice(highPrice)">
                                superiore a {{ highPrice | currency:"EUR":"symbol":".0"}}  
                            </li>
                          </ul>
                      </div>
                    </div>
                </div>

              </div>
              
         
        </div>

        <div class="col-md-10">

            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">

                <app-product-preview 
                    *ngFor="let p of filteredProducts"
                    [product]="p"

                ></app-product-preview>
            </div>
        </div>

     

    </div>






