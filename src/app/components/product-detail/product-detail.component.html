<app-header></app-header>

<div *ngIf="errorMessage" class="m-3 p-3 customBorder">

    <p>{{errorMessage}}</p>

</div>


<div class="container py-5 implementazioneGRID position-relative" *ngIf="product">

    <div 

    *ngIf="showPopup"
     
    class="velo">
    
        <div class="popup px-3 pt-3">
            <div class="d-flex justify-content-between">
                <div class="d-flex"><i class="bi bi-check-circle-fill text-success me-2"></i> <p>Aggiunto al carrello</p></div>
                <i class="bi bi-x" (click)="showPopup = false"></i>
            </div>

            <div class="d-flex">
                <img [src]="product.immagine" class="img-fluid imgW"  alt="immagine prodotto">
                <div class="ps-3">
                    <h1 class="fs-4">{{product.nome}}</h1>
                    <h3 class="fs-5 fw-light">{{product.categoria}}</h3>
                    <h3 class="fs-5 fw-light">Taglia: {{selectedSize}}</h3>
                    <h3 class="fs-5 fw-light">Colore: {{selectedColor}}</h3>
                    <h3 class="fs-5 fw-bold">{{product.prezzo | currency:"EUR"}}</h3>
                </div>
            </div>
            <div class="d-flex justify-content-between my-2">
                <button type="button" class="w-50 me-1"  routerLink="/cart" >Visualizza Carrello</button>
                <button type="button" class="w-50 ms-1" routerLink="/form-checkout">Vai al Pagamento</button>
            </div>

        </div>
    </div>

    <!--INTESTAZIONE-->

    <div class="my-3 my-lg-0 titoloGRID">
        <h1>{{product.nome}}</h1>
        <h3 class="fw-light">{{product.categoria}}</h3>
        <h3 class="fw-bold">{{product.prezzo | currency:"EUR"}}</h3>
    </div>

    
    <!--DESCRIZIONE-->

    <div class="mb-5 mb-lg-0 descrizioneGRID">
        <p>{{product.descrizione}}</p>
    </div>

    <!--IMMAGINI-->

    <div class="imgGRID">
        <img [src]="product.immagine" alt="immagine scarpa" class="img-fluid">
    </div>

    <!--TAGLIA-->

    <div 
    class="container my-5 my-lg-2 pt-2 taglieGRID"
    [ngClass]="{'border border-danger rounded': showRedBorderSize}"
    >
        <h3 class="container fs-5">Seleziona la taglia/misura</h3>
        <div class="row row-cols-3 g-2">
            <div class="col"  *ngFor="let size of product.taglie_disponibili">
                <button 
                type="button" 
                class="btn btn-outline-secondary w-100"
                [ngClass]="{'btn-secondary': size === selectedSize, 'text-white': size === selectedSize}"
                (click)="[selectedSize = size, showRedBorderSize = false]">
                    {{size}}
                </button>
            </div>
        </div>
        <p class="text-danger my-3 " *ngIf="showRedBorderSize">Scegli una taglia</p>
    </div>
    

    <!--COLORE-->

    <div 
    class="container my-5 my-lg-2 pt-2 coloreGRID"
    [ngClass]="{'border border-danger rounded': showRedBorderColor}">
        <h3 class="container fs-5">Seleziona il colore</h3>
        <div class="row row-cols-2 g-2">
            <div class="col"  *ngFor="let color of product.colori_disponibili">
                <button type="button" 
                class="btn btn-outline-secondary w-100"
                [ngClass]="{'btn-secondary': color === selectedColor, 'text-white': color === selectedColor}"
                (click)="[selectedColor = color, showRedBorderColor = false]">
                    {{color}}
                </button>
            </div>
        </div>
        <p class="text-danger mt-3 " *ngIf="showRedBorderColor">Scegli un colore</p>
    </div>

    <!--BOTTONI-->

    <div class="container bottoniGRID">
        <button type="button" class="btn btn-outline-secondary w-100 mb-3">Aggiungi ai preferiti</button>
        <button type="button" class="btn btn-secondary w-100 mb-3" (click)="addToCart()">Aggiungi al carrello</button>
        
    </div>


</div>



